---
title: Alignas
category: C++11
order: 2
---

> 编译器支持最低版本要求:
> * GCC: 4.8
> * MSVC: 19.0
> * Clang: 3.0
>
> 提案: [N2341](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2007/n2341.pdf)

C++11引入了alignas关键字，它是一个对齐说明符，可以让程序员控制变量的对齐方式。

在C++中，编译器会对变量进行对齐，以便更好地利用CPU的缓存机制，提高程序的性能。对齐是指将数据存储在内存中的起始地址，使其能够被CPU高效地访问。

通常情况下，编译器会将变量按照CPU的缓存行大小进行对齐。例如，对于一个4字节的变量，在x86架构下，它会被对齐到4字节的整数倍，即4、8、12等。

但是，在某些情况下，程序员可能希望将变量以不同的方式进行对齐。这时，可以使用alignas关键字来指定对齐方式。

例如，假设我们定义了一个结构体：

```cpp
struct MyStruct {
    char c;
    double d;
};
```

这个结构体的大小应该是16字节（因为double通常是8字节），但是由于c的大小只有1字节，编译器会将它放在起始地址，这会导致结构体的大小为9字节。如果我们想让这个结构体按照16字节对齐，可以这样做：

```cpp
struct alignas(16) MyStruct {
    char c;
    double d;
};
```

这样，编译器会强制将这个结构体按照16字节对齐。

需要注意的是，alignas关键字只能用于变量、类型、typedef、模板类型参数和非静态数据成员。它不能用于函数、类或枚举。并且，alignas的参数必须是一个常量表达式。